document.addEventListener("DOMContentLoaded",function(){let e=new WebSocket("ws://candashboard.local:8000"),t=document.getElementsByClassName("section-item"),a=document.getElementById("check"),n=document.getElementById("AC"),s={"0xAA":"Не удалось выполнить сброс модуля MCP2515","0xBB":"Не удалось установить скорость чтения на MCP2515","0xDD":"Не удалось установить нормальный режим работы MCP2515","0xFF":"Соединение с MCP2515 установленно"},o=!0;function r(e){return(parseInt(e)>>>0).toString(2).split("").reverse()}function _(e){alert(s[e])}e.onopen=function(s){e.send("get_mcp_status"),e.onmessage=function(s){switch(s.data){case"0xAA":case"0xBB":case"0xDD":_(s.data),e.send("close_ws");break;case"0xFF":_(s.data),e.send("get_CanBus_data");break;case"no_bus_data":o=!1,alert("Нет данных с шины CAN. Проверте соединение с CAN");break;default:let c=JSON.parse(s.data),d=Object.keys(c);switch(console.log(d),d[0]){case"329":t[0].innerHTML=.75*parseInt(c["329"].B1)-48-.75;break;case"545":t[1].innerHTML=parseInt(c["545"].B2)-parseInt(c["545"].B1),t[2].innerHTML=parseInt(c["545"].B4)-48,"1"===r(c["545"].B0)[1]?a.style.color="rgb(211, 94, 15)":a.style.color="rgba(117, 117, 117, 0.692)","1"===r(c["545"].B5)[3]?n.style.color="green":n.style.color="rgba(117, 117, 117, 0.692)"}}}},window.addEventListener("beforeunload",e=>"Sure?")});